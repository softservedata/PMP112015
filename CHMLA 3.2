#include<iostream>
using namespace std;



static double Dob(double left[], double right[])
{
	double res = 0;
	for (int i = 0; i < 3; i++)
	{
		res += left[i] * right[i];
	}
	return res;
}
static void CountX(double y[], double x[])
{
	int lenX = 0;
	for (int i = 0; i < 3; i++)
	{
		x[i] = y[i] / pow(Dob(y, y), 0.5);
	}
}
static void Ax(double **A, double x[], double y1[])
{

	int lenA = 3;
	double *q = new double[3];
	for (int i = 0; i < 3; i++)
	{
		for (int j = 0; j < 3; j++)
		{
			q[j] = A[i][j];
			cout << q[j] << endl;
		}
		y1[i] = Dob(q, x);
	}
}
static double countL(double y[], double x[])
{
	return Dob(y, y) / Dob(y, x);
}


void main()
{
	int n;
	n = 3;
	double eps = 0.0001;
	double l = 0;
	double l1 = 0;
	/*double y[3] = { 1, 1, 1 };
	double y1[3] = { 0, 0, 0 };*/
	double *y = new double[3];
	for (int i = 0; i < 3; i++)
	{
		cout << "Enter y[" << i << "]: ";
		cin >> y[i];
		//{1,1,1}
	}
	double *y1 = new double[3];
	for (int i = 0; i < 3; i++)
	{
		cout << "Enter y[" << i << "]: ";
		cin >> y1[i];
		//{0,0,0}
	}
	double **A = new double*[3];
	for (int i = 0; i < 3; ++i)
	{
		A[i] = new double[i];
		for (int j = 0; j < 3; ++j)
		{
			cout << "Enter element[" << i << "][" << j << "]: ";
			cin >> A[i][j];
		}
	}
	double *x = new double[3];
	CountX(y, x);
	int i = 0;
	do
	{
		cout << "done: " << i << endl;
		l = l1;
		for (int i = 0; i < 3; i++)
		{
			y[i] = y1[i];
		}
		Ax(A, x, y1);
		l1 = countL(y1, x);
		CountX(y1, x);
		cout << "y1[0]: " << y1[0] << endl;
		cout << "y2[0]: " << y1[1] << endl;
		cout << "y3[0]: " << y1[2] << endl;
		cout << "l1: " << l1 << endl;
		cout << "l: " << l << endl;
		++i;
	} while (abs(l1 - l) > eps);

	system("pause");
}
